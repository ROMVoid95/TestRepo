plugins {
	id 'java'
	id 'eclipse'
  	id "se.bjurr.gitchangelog.git-changelog-gradle-plugin" version "1.71.4"
}

task generateGitChangelogTemplateFromFile(type: se.bjurr.gitchangelog.plugin.gradle.GitChangelogTask) {
	group = 'changelog'
	fromRepo = file(".");
 	settingsFile = file("changelog.json").getAbsolutePath();
 	file = new File("${projectDir}/CHANGELOG_file.md");
 	templateContent = file('template.mustache').getText('UTF-8');
}

tasks.register("generateChangelogs") {
 doLast { }
}

generateChangelogs.dependsOn {
  tasks.findAll { task -> task.name.startsWith('generateGit') }
}

sourceSets {
 main.java.srcDirs = ['src/main/java']
}